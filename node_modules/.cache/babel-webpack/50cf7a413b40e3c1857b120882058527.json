{"ast":null,"code":"import { take } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../user.service\";\nimport * as i2 from \"../cat.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/material/card\";\nimport * as i5 from \"./add-a-name-dialog/add-a-name-dialog.component\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/badge\";\nimport * as i8 from \"./pipes/is-voting-open.pipe\";\nimport * as i9 from \"./pipes/remaining-votes.pipe\";\nimport * as i10 from \"./pipes/name-winner.pipe\";\n\nfunction CatDisplayComponent_ng_container_0_ng_container_11_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵelement(1, \"add-a-name-dialog\", 11);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const currentCat_r1 = i0.ɵɵnextContext(2).ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"currentCat\", currentCat_r1);\n  }\n}\n\nfunction CatDisplayComponent_ng_container_0_ng_container_11_ng_container_2_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵelementStart(1, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function CatDisplayComponent_ng_container_0_ng_container_11_ng_container_2_div_4_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const name_r10 = restoredCtx.$implicit;\n      const currentCat_r1 = i0.ɵɵnextContext(3).ngIf;\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.castVote(currentCat_r1, name_r10.name);\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const name_r10 = ctx.$implicit;\n    const user_r8 = i0.ɵɵnextContext().ngIf;\n    const currentCat_r1 = i0.ɵɵnextContext(2).ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵattributeInterpolate1(\"data-testid\", \"CatDisplay_Vote_Button_\", currentCat_r1.id, \"\");\n    i0.ɵɵpropertyInterpolate(\"matBadge\", name_r10.votes);\n    i0.ɵɵproperty(\"disabled\", user_r8.votes[currentCat_r1.id] > 2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(name_r10.name);\n  }\n}\n\nfunction CatDisplayComponent_ng_container_0_ng_container_11_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 12);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"remainingVotes\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, CatDisplayComponent_ng_container_0_ng_container_11_ng_container_2_div_4_Template, 3, 4, \"div\", 13);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const user_r8 = ctx.ngIf;\n    const currentCat_r1 = i0.ɵɵnextContext(2).ngIf;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"You have \", i0.ɵɵpipeBind1(3, 2, user_r8.votes[currentCat_r1.id]), \" votes remaining\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", currentCat_r1.names);\n  }\n}\n\nfunction CatDisplayComponent_ng_container_0_ng_container_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CatDisplayComponent_ng_container_0_ng_container_11_div_1_Template, 2, 1, \"div\", 9);\n    i0.ɵɵtemplate(2, CatDisplayComponent_ng_container_0_ng_container_11_ng_container_2_Template, 5, 4, \"ng-container\", 0);\n    i0.ɵɵpipe(3, \"async\");\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const currentCat_r1 = i0.ɵɵnextContext().ngIf;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", currentCat_r1.names.length < 8);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(3, 2, ctx_r2.user$));\n  }\n}\n\nfunction CatDisplayComponent_ng_container_0_ng_template_13_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵelementStart(1, \"button\", 15);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const name_r19 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"matBadge\", name_r19.votes);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(name_r19.name);\n  }\n}\n\nfunction CatDisplayComponent_ng_container_0_ng_template_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h2\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"nameWinner\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, CatDisplayComponent_ng_container_0_ng_template_13_div_3_Template, 3, 2, \"div\", 13);\n  }\n\n  if (rf & 2) {\n    const currentCat_r1 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Voting has ended. This cat is named \", i0.ɵɵpipeBind1(2, 2, currentCat_r1.names), \"!!\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", currentCat_r1.names);\n  }\n}\n\nfunction CatDisplayComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 1);\n    i0.ɵɵelementStart(2, \"mat-card\");\n    i0.ɵɵelementStart(3, \"mat-card-title\", 2);\n    i0.ɵɵtext(4, \" You get three votes per cat. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 3);\n    i0.ɵɵelementStart(6, \"div\");\n    i0.ɵɵelementStart(7, \"div\", 4);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"img\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 6);\n    i0.ɵɵtemplate(11, CatDisplayComponent_ng_container_0_ng_container_11_Template, 4, 4, \"ng-container\", 7);\n    i0.ɵɵpipe(12, \"isVotingOpen\");\n    i0.ɵɵtemplate(13, CatDisplayComponent_ng_container_0_ng_template_13_Template, 4, 4, \"ng-template\", null, 8, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const currentCat_r1 = ctx.ngIf;\n\n    const _r3 = i0.ɵɵreference(14);\n\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\"Cat Id: \", currentCat_r1.id, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"src\", currentCat_r1.photoUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(12, 4, currentCat_r1.votingEnds))(\"ngIfElse\", _r3);\n  }\n}\n\nclass PotentialName {\n  constructor(name) {\n    this.name = '';\n    this.votes = 0;\n    this.alreadyVoted = false;\n    return {\n      name,\n      votes: 0,\n      alreadyVoted: false\n    };\n  }\n\n}\n\nexport class CatDisplayComponent {\n  constructor(userService, catService) {\n    this.userService = userService;\n    this.catService = catService;\n    this.currentCat$ = this.catService.getCurrentCat();\n    this.user$ = this.userService.getCurrentUser();\n  }\n\n  ngOnInit() {\n    this.catService.getAnotherCat().pipe(take(1)).subscribe();\n  }\n\n  castVote(currentCat, name) {\n    const updatedNames = currentCat.names.map(nameWithVote => {\n      if (nameWithVote.name === name) {\n        return {\n          name: name,\n          votes: nameWithVote.votes + 1\n        };\n      }\n\n      return nameWithVote;\n    });\n    const updatedCat = Object.assign(Object.assign({}, currentCat), {\n      names: [...updatedNames]\n    });\n    this.userService.updateUserVotes(updatedCat.id);\n    this.catService.updateCurrentCat(updatedCat);\n  }\n\n}\n\nCatDisplayComponent.ɵfac = function CatDisplayComponent_Factory(t) {\n  return new (t || CatDisplayComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.CatService));\n};\n\nCatDisplayComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CatDisplayComponent,\n  selectors: [[\"ntc-cat-display\"]],\n  decls: 2,\n  vars: 3,\n  consts: [[4, \"ngIf\"], [1, \"w-full\", \"flex\", \"justify-center\"], [1, \"text-center\"], [1, \"flex\", \"justify-around\", \"mr-10\"], [1, \"bg-green-100\", \"m-2\", \"p-4\", \"absolute\", \"rounded-md\", \"font-bold\", \"drop-shadow-md\"], [\"width\", \"500\", \"alt\", \"Photo of a cat\", 1, \"mx-auto\", \"rounded-xl\"], [1, \"box-border\"], [4, \"ngIf\", \"ngIfElse\"], [\"noVoting\", \"\"], [\"class\", \"m-5 w-full\", 4, \"ngIf\"], [1, \"m-5\", \"w-full\"], [\"data-testid\", \"CatDisplay_AddAName\", 3, \"currentCat\"], [1, \"m-5\", \"w-full\", \"text-center\"], [\"class\", \"m-5 w-full\", 4, \"ngFor\", \"ngForOf\"], [\"mat-raised-button\", \"\", \"matBadgePosition\", \"after\", \"matBadgeColor\", \"accent\", 1, \"w-full\", 3, \"disabled\", \"matBadge\", \"click\"], [\"mat-raised-button\", \"\", \"disabled\", \"\", \"matBadgePosition\", \"after\", \"matBadgeColor\", \"accent\", 1, \"w-full\", 3, \"matBadge\"]],\n  template: function CatDisplayComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, CatDisplayComponent_ng_container_0_Template, 15, 6, \"ng-container\", 0);\n      i0.ɵɵpipe(1, \"async\");\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx.currentCat$));\n    }\n  },\n  directives: [i3.NgIf, i4.MatCard, i4.MatCardTitle, i5.AddANameDialogComponent, i3.NgForOf, i6.MatButton, i7.MatBadge],\n  pipes: [i3.AsyncPipe, i8.IsVotingOpenPipe, i9.RemainingVotesPipe, i10.NameWinnerPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjYXQtZGlzcGxheS5jb21wb25lbnQuc2NzcyJ9 */\"]\n});","map":{"version":3,"sources":["/Users/lnewsom_1/Desktop/projects/name-that-cat/src/app/cat-display/cat-display.component.ts","/Users/lnewsom_1/Desktop/projects/name-that-cat/src/app/cat-display/cat-display.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { take } from 'rxjs/operators';\nimport { CatService } from '../cat.service';\nimport { Cat } from '../models/cat';\nimport { User } from '../models/user';\nimport { UserService } from '../user.service';\n\nclass PotentialName {\n  name: string = '';\n  votes: number = 0;\n  alreadyVoted: boolean = false;\n  constructor(name: string) {\n    return {\n      name,\n      votes: 0,\n      alreadyVoted: false\n    }\n  }\n}\n\n@Component({\n  selector: 'ntc-cat-display',\n  templateUrl: './cat-display.component.html',\n  styleUrls: ['./cat-display.component.scss']\n})\nexport class CatDisplayComponent implements OnInit {\n  readonly currentCat$: Observable<Cat> = this.catService.getCurrentCat();\n  readonly user$: Observable<User | undefined> = this.userService.getCurrentUser();\n\n  constructor(\n    private readonly userService: UserService,\n    private readonly catService: CatService\n  ) {}\n\n  ngOnInit() {\n    this.catService.getAnotherCat().pipe(\n      take(1)\n    ).subscribe();\n  }\n\n  castVote(currentCat: Cat, name: string) {\n    const updatedNames = currentCat.names.map((nameWithVote) => {\n      if(nameWithVote.name === name) {\n        return {\n          name: name,\n          votes: nameWithVote.votes + 1\n        }\n      }\n      return nameWithVote\n    });\n    const updatedCat: Cat = {\n      ...currentCat,\n      names: [\n        ...updatedNames,\n      ]\n    };\n\n    this.userService.updateUserVotes(updatedCat.id);\n    this.catService.updateCurrentCat(updatedCat);\n  }\n}\n","<ng-container *ngIf=\"currentCat$ | async as currentCat\">\n    <div class=\"w-full flex justify-center\">\n        <mat-card>\n            <mat-card-title class=\"text-center\">\n                You get three votes per cat.\n            </mat-card-title>\n            <div class=\"flex justify-around mr-10\">\n                <div>\n                    <div\n                        class=\"bg-green-100 m-2 p-4 absolute rounded-md font-bold drop-shadow-md\"\n                    >Cat Id: {{ currentCat.id }}</div>\n                    <img \n                        class=\"mx-auto rounded-xl\" \n                        width=\"500\" \n                        attr.src=\"{{currentCat.photoUrl}}\" \n                        alt=\"Photo of a cat\"\n                    />\n                </div>\n                <div class=\"box-border\">\n                    <ng-container *ngIf=\"currentCat.votingEnds | isVotingOpen; else noVoting\">\n                        <div class=\"m-5 w-full\" *ngIf=\"currentCat.names.length < 8\">\n                            <add-a-name-dialog \n                                [currentCat]=\"currentCat\"\n                                data-testid=\"CatDisplay_AddAName\"\n                            ></add-a-name-dialog>               \n                        </div>\n                        <ng-container *ngIf=\"user$ | async as user\">\n                            <div class=\"m-5 w-full text-center\">You have {{ user.votes[currentCat.id] | remainingVotes }} votes remaining</div>\n                            <div class=\"m-5 w-full\" *ngFor=\"let name of currentCat.names\">\n                                <button \n                                    attr.data-testid=\"CatDisplay_Vote_Button_{{ currentCat.id}}\"\n                                    [disabled]=\"user.votes[currentCat.id] > 2\"\n                                    class=\"w-full\" \n                                    mat-raised-button \n                                    (click)=\"castVote(currentCat, name.name)\"\n                                    matBadge=\"{{ name.votes }}\" \n                                    matBadgePosition=\"after\" \n                                    matBadgeColor=\"accent\"\n                                >{{ name.name }}</button>\n                            </div>\n                        </ng-container>\n                    </ng-container>\n                    <ng-template #noVoting>\n                        <h2 class=\"m-5 w-full text-center\">Voting has ended. This cat is named {{ currentCat.names | nameWinner}}!!</h2>\n                        <div class=\"m-5 w-full\" *ngFor=\"let name of currentCat.names\">\n                            <button \n                                class=\"w-full\" \n                                mat-raised-button\n                                disabled\n                                matBadge=\"{{ name.votes }}\" \n                                matBadgePosition=\"after\" \n                                matBadgeColor=\"accent\"\n                            >{{ name.name }}</button>\n                        </div>\n                    </ng-template>\n                </div>\n            </div>\n        </mat-card>\n    </div>\n</ng-container>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}